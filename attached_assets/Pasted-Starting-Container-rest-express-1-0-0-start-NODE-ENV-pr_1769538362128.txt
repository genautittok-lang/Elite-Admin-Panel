Starting Container
> rest-express@1.0.0 start
> NODE_ENV=production node dist/index.cjs
Setting up static file serving...
Looking for build directory at: /app/dist/public
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘           ğŸŒ¸ KVITKA opt Database Check ğŸŒ¸                   â•‘
â•‘              âœ… Database ready!                            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“¡ Connecting to database...
npm warn config production Use `--omit=dev` instead.
âœ… Connected successfully!
ğŸ“¦ Tables already exist - skipping initialization
Build directory found!
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘              ğŸŒ¸ KVITKA opt Server Started ğŸŒ¸               â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  ğŸŒ Port: 8080                                            â•‘
â•‘  ğŸ”§ Mode: production                                   â•‘
â•‘  âœ… Status: Ready                                          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
6:23:13 PM [express] GET /api/dashboard/stats 500 in 193ms :: {"error":"Failed to get stats"}
6:23:13 PM [express] GET /api/orders 500 in 215ms :: {"error":"Failed to get orders"}
6:23:13 PM [express] GET /api/orders/recent 500 in 210ms :: {"error":"Failed to get recent orders"}
6:23:13 PM [express] GET /api/analytics/top-customers 500 in 207ms :: {"error":"Failed to get top customers"}
6:23:13 PM [express] GET /api/analytics/top-products 500 in 217ms :: {"error":"Failed to get top products"}
6:23:14 PM [express] GET /api/orders 500 in 68ms :: {"error":"Failed to get orders"}
6:23:18 PM [express] GET /api/customers 500 in 198ms :: {"error":"Failed to get customers"}
6:23:21 PM [express] GET /api/products 500 in 193ms :: {"error":"Failed to get products"}
6:23:21 PM [express] GET /api/countries 304 in 199ms :: [{"id":"91ea812b-3d9b-4970-89e2-dcd166d94ab0","code":"EC","name":"Ğ•ĞºĞ²Ğ°Ğ´Ğ¾Ñ€","flag":"ğŸ‡ªğŸ‡¨"},{"id":"0988706b-45a6-4716-8e99-c7b765219c6b","code":"CO","name":"ĞšĞ¾Ğ»ÑƒĞ¼Ğ±Ñ–Ñ","flag":"ğŸ‡¨ğŸ‡´"},{"id":"bfb891bb-9d5d-42e5-9ae9-d2929e2aa72e","code":"KE","name":"ĞšĞµĞ½Ñ–Ñ","flag":"ğŸ‡°ğŸ‡ª"},{"id":"547cc9a9-05a0-474e-bbea-ff57bac67711","code":"NL","name":"ĞÑ–Ğ´ĞµÑ€Ğ»Ğ°Ğ½Ğ´Ğ¸","flag":"ğŸ‡³ğŸ‡±"},{"id":"3bc13b8c-9ba5-4b61-a8f4-843272aca042","code":"UA","name":"Ğ£ĞºÑ€Ğ°Ñ—Ğ½Ğ°","flag":"ğŸ‡ºğŸ‡¦"}]
6:23:21 PM [express] GET /api/settings 304 in 191ms :: [{"id":"d8682e90-cbe1-44ce-8f8d-684176b9f59d","key":"usd_rate","value":"41.5","description":"ĞšÑƒÑ€Ñ USD Ğ´Ğ¾ UAH"},{"id":"7fecaaa4-341b-4661-9fee-9fa61ef73061","key":"min_order","value":"5000","description":"ĞœÑ–Ğ½Ñ–Ğ¼Ğ°Ğ»ÑŒĞ½Ğ° ÑÑƒĞ¼Ğ° Ğ·Ğ°Ğ¼Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ Ğ² Ğ³Ñ€Ğ½"},{"id":"389e60d8-f945-496c-a43d-40acb60a17aa","key":"loyalty_threshold","value":"1000","description":"Ğ¡ÑƒĞ¼Ğ° Ğ¿Ğ¾ĞºÑƒĞ¿ĞºĞ¸ Ğ´Ğ»Ñ 1 Ğ±Ğ°Ğ»Ğ° Ğ»Ğ¾ÑĞ»ÑŒĞ½Ğ¾ÑÑ‚Ñ–"},{"id":"69982fce-09e2-4022-beff-6a004c23b82f","key":"loyalty_gift_points","value":"100","description":"ĞšÑ–Ğ»ÑŒĞºÑ–ÑÑ‚ÑŒ Ğ±Ğ°Ğ»Ñ–Ğ² Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ´Ğ°Ñ€ÑƒĞ½ĞºÑƒ"},{"id":"46a04c30-6253-4e60-90c4-c2ae3597ea44","key":"discount_orders_count","value":"10","description":"ĞšÑ–Ğ»ÑŒĞºÑ–ÑÑ‚ÑŒ Ğ·Ğ°Ğ¼Ğ¾Ğ²Ğ»ĞµĞ½ÑŒ Ğ´Ğ»Ñ Ğ·Ğ½Ğ¸Ğ¶ĞºĞ¸"},{"id":"2ad82af1-c306-483e-a544-9c18eefa4331","key":"discount_amount","value":"1000","description":"Ğ¡ÑƒĞ¼Ğ° Ğ·Ğ½Ğ¸Ğ¶ĞºĞ¸ Ğ² Ğ³Ñ€Ğ½"},{"id":"2dfb9f76-95fe-4251-9c71-5c670fe55262","key":"usd_to_uah_rate","value":"45","description":null},{"id":"1a3c7b13-4b83-4788-a499-0983ea71c9d3","key":"min_order_amount","value":"5000","description":null},{"id":"57beedb7-3d86-4724-ba3c-5a1fa8920df0","key":"wholesale_discount","value":"5","description":null},{"id":"2dbd82c2-7483-42b9-b3f0-c3b87abe17a2","key":"loyalty_points_rate","value":"1000","description":null},{"id":"f1138a74-05ac-4913-8249-b65ecd7d977e","key":"auto_exchange_rate","value":"true","description":null},{"id":"8e1dbf69-c0bd-4e49-bf6c-742944672de9","key":"notifications_enabled","value":"true","description":null}]
6:23:21 PM [express] GET /api/plantations 304 in 194ms :: []
6:23:21 PM [express] GET /api/flower-types 304 in 193ms :: [{"id":"47486f8d-63c4-4876-a0de-cffc896846f4","name":"Ğ¢Ñ€Ğ¾ÑĞ½Ğ´Ğ°","category":"single"},{"id":"569ae031-1128-4619-b098-bbc2929ab619","name":"Ğ¢Ñ€Ğ¾ÑĞ½Ğ´Ğ° ĞºÑƒÑ‰Ğ¾Ğ²Ğ°","category":"spray"},{"id":"952aae0c-a9e3-4fef-8058-54e8b2be4200","name":"Ğ¢ÑĞ»ÑŒĞ¿Ğ°Ğ½","category":"single"},{"id":"f59a2d72-b974-41ce-84ca-396c57b9cb19","name":"Ğ¥Ñ€Ğ¸Ğ·Ğ°Ğ½Ñ‚ĞµĞ¼Ğ°","category":"spray"},{"id":"147aed21-df90-4922-b256-334cd23e41d4","name":"Ğ“ĞµÑ€Ğ±ĞµÑ€Ğ°","category":"single"},{"id":"60fc1994-23e5-4843-839d-33f1b7b6cf36","name":"Ğ•ÑƒÑÑ‚Ğ¾Ğ¼Ğ°","category":"single"},{"id":"a5c48ea5-05e5-4a06-9019-50461d876aaf","name":"Ğ“Ğ²Ğ¾Ğ·Ğ´Ğ¸ĞºĞ°","category":"single"},{"id":"d953d191-1f9f-4f55-bd36-f020ed703266","name":"ĞŸÑ–Ğ¾Ğ½","category":"single"}]
6:23:44 PM [express] GET /api/orders 500 in 198ms :: {"error":"Failed to get orders"}
6:23:56 PM [express] POST /api/upload 200 in 9ms :: {"url":"/uploads/product-1769538236763-278549155.png"}
6:23:56 PM [express] POST /api/upload 200 in 161ms :: {"url":"/uploads/product-1769538236851-95146625.png"}
6:23:57 PM [express] POST /api/upload 200 in 6ms :: {"url":"/uploads/product-1769538237053-267516626.png"}
6:23:57 PM [express] POST /api/upload 200 in 250ms :: {"url":"/uploads/product-1769538237158-307326683.png"}
6:23:57 PM [express] POST /api/upload 200 in 164ms :: {"url":"/uploads/product-1769538237458-844444731.png"}
6:23:57 PM [express] POST /api/upload 200 in 125ms :: {"url":"/uploads/product-1769538237735-545186772.png"}
6:23:57 PM [express] POST /api/upload 200 in 81ms :: {"url":"/uploads/product-1769538237870-787329388.png"}
6:23:58 PM [express] POST /api/upload 200 in 69ms :: {"url":"/uploads/product-1769538238077-314878949.png"}
  dataType: undefined,
Create product error: error: column "promo_percent" of relation "products" does not exist
    at /app/dist/index.cjs:68:13326
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async /app/dist/index.cjs:76:31378
  constraint: undefined,
    at async xm.createProduct (/app/dist/index.cjs:76:105736)
    at async /app/dist/index.cjs:325:10829 {
  file: 'parse_target.c',
  line: '1065',
  length: 135,
  routine: 'checkInsertTargets'
  severity: 'ERROR',
  code: '42703',
}
  detail: undefined,
6:24:00 PM [express] POST /api/products 500 in 12ms :: {"error":"Failed to create product"}
  hint: undefined,
  position: '205',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  file: 'parse_target.c',
Create product error: error: column "promo_percent" of relation "products" does not exist
  line: '1065',
    at /app/dist/index.cjs:68:13326
  routine: 'checkInsertTargets'
}
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
6:24:01 PM [express] POST /api/products 500 in 64ms :: {"error":"Failed to create product"}
    at async /app/dist/index.cjs:76:31378
    at async xm.createProduct (/app/dist/index.cjs:76:105736)
    at async /app/dist/index.cjs:325:10829 {
  length: 135,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '205',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
Create product error: error: column "promo_percent" of relation "products" does not exist
    at /app/dist/index.cjs:68:13326
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async /app/dist/index.cjs:76:31378
    at async xm.createProduct (/app/dist/index.cjs:76:105736)
    at async /app/dist/index.cjs:325:10829 {
  length: 135,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,